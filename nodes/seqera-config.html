<script type="text/html" data-template-name="seqera-config">
  <div class="form-row">
    <label for="node-config-input-baseUrl"><i class="icon-globe"></i> Base URL</label>
    <input type="text" id="node-config-input-baseUrl" placeholder="https://api.cloud.seqera.io" />
  </div>
  <div class="form-row">
    <label for="node-config-input-workspaceId"><i class="icon-tasks"></i> Workspace&nbsp;ID</label>
    <input type="number" id="node-config-input-workspaceId" placeholder="(optional)" />
  </div>
  <div class="form-row">
    <label for="node-config-input-token"><i class="icon-lock"></i> API Token</label>
    <input type="password" id="node-config-input-token" placeholder="Bearer token" autocomplete="off" />
  </div>
</script>

<script type="text/markdown" data-help-name="seqera-config">
  Global Seqera Platform configuration node to store connection details.

  ### Details

  Configure the following options:

  - **Base URL**: The base URL for the Seqera API (defaults to `https://api.cloud.seqera.io`)
  - **Workspace ID**: Your Seqera workspace ID (optional)
  - **API Token**: Your personal access token for authenticating with Seqera Platform. Create a Seqera access token via [_Your Tokens_](https://cloud.seqera.io/tokens) in the user menu.

  This configuration node is used by all other Seqera nodes to authenticate with the Seqera Platform API.

  ### References

  - [Seqera Platform API docs](https://docs.seqera.io/platform/latest/api) - information on how to get an API token
</script>

<script type="text/javascript">
  RED.nodes.registerType("seqera-config", {
    category: "config",
    defaults: {
      baseUrl: { value: "https://api.cloud.seqera.io" },
      workspaceId: { value: null },
    },
    credentials: {
      token: { type: "password" },
    },
    label: function () {
      const wsPart = this.workspaceId ? `, WS ${this.workspaceId}` : "";
      return this.baseUrl ? `Seqera (${this.baseUrl}${wsPart})` : "Seqera config";
    },
  });
</script>
